<!doctype html>
<html>
<head>
  <meta charset="utf-8">
</head>

<body>
<div>
  <h1>EventSource</h1>

  <h2>Last message without explicit event type</h2>
  <p id="lastmessage"></p>

  <h2>Message sent with event type football/goal</h2>
  <ol id="goals"></ol>
</div>

<script>
const lastmessage = document.getElementById(`lastmessage`);
const goals = document.getElementById(`goals`);
const eventSource = new EventSource(`./sse`);

eventSource.addEventListener(`message`, function (event) {
    lastmessage.textContent = event.data;
});

eventSource.addEventListener(`football/goal`, function (event) {
    const li = document.createElement(`li`);
    li.textContent = `goal for ${event.data}`;
    goals.appendChild(li);
});
</script>
</body>
</html>
